<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description"
		content="Responsive Bootstrap4 Shop Template, Created by Imran Hossain from https://imransdesign.com/">

	<!-- title -->
	<title>Shop</title>

	<!-- favicon -->
	<link rel="shortcut icon" type="image/png" href="/public/assets/img/favicon.png">
	<!-- google font -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
	<!-- fontawesome -->
	<link rel="stylesheet" href="/public/assets/css/all.min.css">
	<!-- bootstrap -->
	<link rel="stylesheet" href="/public/assets/bootstrap/css/bootstrap.min.css">
	<!-- owl carousel -->
	<link rel="stylesheet" href="/public/assets/css/owl.carousel.css">
	<!-- magnific popup -->
	<link rel="stylesheet" href="/public/assets/css/magnific-popup.css">
	<!-- animate css -->
	<link rel="stylesheet" href="/public/assets/css/animate.css">
	<!-- mean menu css -->
	<link rel="stylesheet" href="/public/assets/css/meanmenu.min.css">
	<!-- main style -->
	<link rel="stylesheet" href="/public/assets/css/main.css">
	<!-- responsive -->
	<link rel="stylesheet" href="/public/assets/css/responsive.css">


	<style>
		.category-offer-banner {
  background-color: #f5f5f5;
  padding: 30px 0;
}

.category-offer-banner .offer-banner-content {
  position: relative;
  z-index: 1;
}

.category-offer-banner h2 {
  font-size: 30px;
  color: #333;
}

.category-offer-banner p {
  font-size: 16px;
  color: #666;
}

.category-offer-banner:before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.category-offer-banner:hover:before {
  opacity: 1;
}

.category-offer-banner:hover .offer-banner-content h2 {
  color: #fff;
}

.category-offer-banner:hover .offer-banner-content p {
  color: #ddd;
}
.icon-header-noti::after {
  content: attr(data-notify);
  font-family: Poppins-Regular;
  font-size: 12px;
  color: #fff;
  line-height: 15px;
  text-align: center;

  display: block;
  position: absolute;
  top: -7px;
  right: 0;
  min-width: 15px;
  height: 15px;
  padding: 0 3px;
  background-color: #717fe0;
}
	</style>
</head>

<body>

	<!--PreLoader-->
	<div class="loader">
		<div class="loader-inner">
			<div class="circle"></div>
		</div>
	</div>
	<!--PreLoader Ends-->

	<!-- header -->
	<div class="top-header-area" id="sticker">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-sm-12 text-center">
					<div class="main-menu-wrap">
						<!-- logo -->
						<div class="site-logo">
							<a href="/home">
								<h5><span class="orange-text">NutriFreshFruit</span></h5>
							</a>
						</div>
						<!-- logo -->

						<!-- menu start -->
						<nav class="main-menu">
							<ul>
							  <li class="current-list-item">
								<a href="/home">Home</a>
							  </li>
							  <li>
								<a href="/shop">Shop</a>
								<ul class="sub-menu">
								  <li><a href="/shop">Shop</a></li>
							
								  <li><a href="/cart">Cart</a></li>
								  <li><a href="/coupon">Coupons</a></li>
								  <li><a href="/myOrder">my orders</a></li>
								</ul>
							  </li>
                              <li>
                                <a href="/getCategory?name=<%=allcategory[0].categoryName%>">category</a>
                                <ul class="sub-menu">
                                    <% for(let i=0;i<allcategory.length;i++){ %>
                                    <li><a href="/getCategory?name=<%=allcategory[i].categoryName%>"><%=  allcategory[i].categoryName %></a></li>
                                    <% } %>
                                    
                                    
                                </ul>
                              </li>

							  <li>

								<% if(!userCartData){ %>
									<div class="header-icons icon-header-noti" style="display: flex; align-items: center;" data-notify="0">
									<a class="shopping-cart" href="/cart">
									  <i class="fas fa-shopping-cart"></i>
									</a>
								  </div>
							<%	}else{ %>
								<div class="header-icons icon-header-noti" style="display: flex; align-items: center;" data-notify="<%= userCartData.product.length%>">
									<a class="shopping-cart" href="/cart">
									  <i class="fas fa-shopping-cart"></i>
									</a>
								  </div>
							<%	} %> 
						</li>
						<li>
								  <form action="/search" method="post" class="search-form" style="margin-left: 10px;">
									<div class="input-group">
									  <input type="text" name="search" class="form-control" placeholder="Search...">
									  <div class="input-group-append">
										<button type="submit" class="btn btn-primary">
										  <i class="fas fa-search"></i>
										</button>
									  </div>
									</div>
								  </form>
								
							  </li>
							</ul>
						  </nav>
						<a class="mobile-show search-bar-icon" href="#"><i class="fas fa-search"></i></a>
						<div class="mobile-menu"></div>
						<!-- menu end -->
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end header -->


	<!-- breadcrumb-section -->
	<div class="breadcrumb-section breadcrumb-bg">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 offset-lg-2 text-center">
					<div class="breadcrumb-text">
						<p>Fresh and Organic</p>
						<h1>categories</h1>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end breadcrumb section -->

	<!-- category offer banner -->
	
	<% if(category[0].categoryOffer >0){ %>
<div class="category-offer-banner">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center">
        <div class="offer-banner-content">
          <h2>Special Category Offer!</h2>
          <p>Get exclusive discounts on our featured categories.</p>
		  <h4><%= selectedCategory[0].categoryOffer %> Rupees offer for every product on this category</h4>
        </div>
      </div>
    </div>
  </div>
</div>
<% } %>


<!-- end category offer banner -->

    
	<!-- products -->
	<div class="product-section mt-150 mb-150">
		<div class="container">
			<div class="row product-lists">
				<% allProducts.forEach(function(product) { %>
					<div class="col-lg-4 col-md-6 text-center">
						<div class="single-product-item">
							<div class="product-image">
								<a href="/single-product?id=<%= product._id  %>" >
									<img src="/public/images/<%= product.productImage[0] %>" alt=""
										style="width: 100%; height: 200px;">
								</a>
							</div>
							<h3>
								<%= product.productName %>
							</h3>
							

							<div class="price-container">
								<% if (category[0].categoryOffer ) { %>
								<p class="product-offer-price">
								  <h6>Per Kg</h6>
								  <h3>&#8377;<%= product.price - category[0].categoryOffer  %></h3>

								
								  <h5 style="text-decoration: line-through;">&#8377;<%= product.price %></h5>
								</p>
								  <% } else { %>
									<p class="product-price">
										<h6>Per Kg</h6>
										<h3>&#8377;<%= product.price %></h3>
									  </p>
								<% } %>
							
						
							  </div>
							  

							<a href="#" onclick="addToCart(event,'<%= product._id %>')"  class="cart-btn"><i
									class="fas fa-shopping-cart"></i> Add to Cart</a>
						</div>
					</div>
				<% }) %>
			</div>
	
			<div class="row">
				<div class="col-lg-12 text-center">
					<div class="pagination-wrap">
						<ul>
							<% if (currentPage > 1) { %>
								<li><a href="/getCategory?name=<%= selectedCategory[0].categoryName %>&page=<%= currentPage - 1 %>">Prev</a></li>
							  <% } %>
							  <% for (let i = 1; i <= totalPages; i++) { %>
								<% if (i === currentPage) { %>
								  <li><a class="active" href="#"><%= i %></a></li>
								<% } else { %>
								  <li><a href="/getCategory?name=<%= selectedCategory[0].categoryName %>&page=<%= i %>"><%= i %></a></li>
								<% } %>
							  <% } %>
							  <% if (currentPage < totalPages) { %>
								<li><a href="/getCategory?name=<%= selectedCategory[0].categoryName %>&page=<%= currentPage + 1 %>">Next</a></li>
							  <% } %>
							  
						</ul>
					</div>
				</div>
			</div>
	
		</div>
	</div>
	

	<!-- end products -->

	<!-- logo carousel -->
	<div class="logo-carousel-section">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="logo-carousel-inner">
						<div class="single-logo-item">
							<img src="/public/assets/img/company-logos/1.png" alt="">
						</div>
						<div class="single-logo-item">
							<img src="/public/assets/img/company-logos/2.png" alt="">
						</div>
						<div class="single-logo-item">
							<img src="/public/assets/img/company-logos/3.png" alt="">
						</div>
						<div class="single-logo-item">
							<img src="/public/assets/img/company-logos/4.png" alt="">
						</div>
						<div class="single-logo-item">
							<img src="/public/assets/img/company-logos/5.png" alt="">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>



	<div class="footer-area">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 col-md-6">
					<div class="footer-box about-widget">
						<h2 class="widget-title">About us</h2>
						<p>Ut enim ad minim veniam perspiciatis unde omnis iste natus error sit voluptatem accusantium
							doloremque laudantium, totam rem aperiam, eaque ipsa quae.</p>
					</div>
				</div>
				<div class="col-lg-3 col-md-6">
					<div class="footer-box get-in-touch">
						<h2 class="widget-title">Get in Touch</h2>
						<ul>
							<li>34/8, East Hukupara, Gifirtok, Sadan.</li>
							<li>support@fruitkha.com</li>
							<li>+00 111 222 3333</li>
						</ul>
					</div>
				</div>
				<div class="col-lg-3 col-md-6">
					<div class="footer-box pages">
						<h2 class="widget-title">Pages</h2>
						<ul>
							<li><a href="index.html">Home</a></li>
							<li><a href="about.html">About</a></li>
							<li><a href="services.html">Shop</a></li>
							<li><a href="news.html">News</a></li>
							<li><a href="contact.html">Contact</a></li>
						</ul>
					</div>
				</div>
				<div class="col-lg-3 col-md-6">
					<div class="footer-box subscribe">
						<h2 class="widget-title">Subscribe</h2>
						<p>Subscribe to our mailing list to get the latest updates.</p>
						<form action="index.html">
							<input type="email" placeholder="Email">
							<button type="submit"><i class="fas fa-paper-plane"></i></button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>


	<div class="copyright">
		<div class="container">
			<div class="row">
				<div class="col-lg-6 col-md-12">
					<p>Copyrights &copy; 2019 - <a href="https://imransdesign.com/">Imran Hossain</a>, All Rights
						Reserved.<br>
						Distributed By - <a href="https://themewagon.com/">Themewagon</a>
					</p>
				</div>
				<div class="col-lg-6 text-right col-md-12">
					<div class="social-icons">
						<ul>
							<li><a href="#" target="_blank"><i class="fab fa-facebook-f"></i></a></li>
							<li><a href="#" target="_blank"><i class="fab fa-twitter"></i></a></li>
							<li><a href="#" target="_blank"><i class="fab fa-instagram"></i></a></li>
							<li><a href="#" target="_blank"><i class="fab fa-linkedin"></i></a></li>
							<li><a href="#" target="_blank"><i class="fab fa-dribbble"></i></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
<!-- Sweet Alert Script -->
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
	<script>
		    $(function () {
      var selectedClass = "";
      $("p").click(function () {
        selectedClass = $(this).attr("data-rel");
        $("#portfolio").fadeTo(50, 0.1);
        $("#portfolio div").not("." + selectedClass).fadeOut();
        setTimeout(function () {
          $("." + selectedClass).fadeIn();
          $("#portfolio").fadeTo(50, 1);
        }, 500);

      });
    });


	
 function addToCart(event, productId) {
  event.preventDefault();
  var addButton = event.target;
  addButton.disabled = true;

  // Create a request payload
  var data = { productId: productId };

  // Send a POST request using Fetch API
  fetch('/addtocart', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
  })
    .then(response => response.json())
    .then(response => {
      console.log('Product added to cart:', response.message);
    //   var cartCount = parseInt(document.getElementById('cartCount').innerText);
    //   document.getElementById('cartCount').innerText = cartCount + 1;
      addButton.disabled = false; // Enable the button after successful request

      // Show SweetAlert notification
      swal("Success", 'Added to cart', "success");
    })
    .catch(error => {
      console.error('Error adding product to cart:', error);
      addButton.disabled = false; // Enable the button in case of an error

      // Show SweetAlert error notification
      swal("Error", "Failed to add product to cart", "error");
    });
}


	</script>
	

	
	<script src="/public/assets/js/jquery-1.11.3.min.js"></script>
	<!-- bootstrap -->
	<script src="/public/assets/bootstrap/js/bootstrap.min.js"></script>
	<!-- count down -->
	<script src="/public/assets/js/jquery.countdown.js"></script>
	<!-- isotope -->
	<script src="/public/assets/js/jquery.isotope-3.0.6.min.js"></script>
	<!-- waypoints -->
	<script src="/public/assets/js/waypoints.js"></script>
	<!-- owl carousel -->
	<script src="/public/assets/js/owl.carousel.min.js"></script>
	<!-- magnific popup -->
	<script src="/public/assets/js/jquery.magnific-popup.min.js"></script>
	<!-- mean menu -->
	<script src="/public/assets/js/jquery.meanmenu.min.js"></script>
	<!-- sticker js -->
	<script src="/public/assets/js/sticker.js"></script>
	<!-- main js -->
	<script src="/public/assets/js/main.js"></script>

</body>

</html>